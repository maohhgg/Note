---
title: ä»£ç è§„èŒƒï¼ˆAndroidæŒ‡å—äºŒï¼‰
date: 2016/9/9
tag:
  - ä»£ç æŒ‡å—
urlname: Android-guide-1
---

# 2\. ä»£ç è§„èŒƒ

## 2.1 Javaè¯­è¨€è§„èŒƒ

### 2.1.1 ç»å¯¹ä¸å¿½ç•¥å¼‚å¸¸

ä»¥æ­£ç¡®çš„æ–¹å¼å¤„ç†å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š

```java
public void setUserId(String id) {
    try {
        mUserId = Integer.parseInt(id);
    } catch (NumberFormatException e) { }
}
```

è¿™é‡Œå°†ä¼šç»™å¼€å‘è€…å’Œç”¨æˆ·å¸¦æ¥ä¸æ¸…æ¥šçš„æ¶ˆæ¯ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯å¹¶æ•è·åˆ°å¼‚å¸¸æ—¶ï¼Œè¿™ç§å†™æ³•ä¼šä½¿å¾—å¼€å‘è€…å¾ˆéš¾debugå¹¶ä¸”ä¼šç»™ç”¨æˆ·å¸¦æ¥å›°æƒ‘ï¼Œå¦‚æœ‰å¿…è¦æç¤ºç”¨æˆ·å¹¶ä¸”åœ¨consoleè®°å½•ä¿¡æ¯è®©æˆ‘ä»¬å»debugã€‚åº”å¦‚ä¸‹ï¼š

```java
public void setCount(String count) {
    try {
        count = Integer.parseInt(id);
    } catch (NumberFormatException e) {
        count = 0;
        Log.e(TAG, "There was an error parsing the count " + e);
        DialogFactory.showErrorMessage(R.string.error_message_parsing_count);
    }
}
```

é€‚å½“å¤„ç†å¦‚ä¸‹çš„é”™è¯¯ï¼š

- æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯ç»™ç”¨æˆ·æç¤ºä»–ä»¬å‡ºç°äº†ä¸€ä¸ªé”™è¯¯ã€‚
- è®¾ç½®æ—¶æœ‰é»˜è®¤çš„é€‰é¡¹
- æŠ›å‡ºä¸€ä¸ªåˆé€‚çš„å¼‚å¸¸

### 2.1.2 ä¸è¦æ•æ‰æ™®é€šå¼‚å¸¸

æ•æ‰å¼‚å¸¸æ—¶ä¸åº”è¯¥æœ‰ä¸‹é¢çš„æƒ…å†µï¼š

```java
public void openCustomTab(Context context, Uri uri) {
    Intent intent = buildIntent(context, uri);
    try {
        context.startActivity(intent);
    } catch (Exception e) {
        Log.e(TAG, "There was an error opening the custom tab " + e);
    }
}
```

ä¸ºä»€ä¹ˆ?

_é€šå¸¸ä¸è¦è¿™æ ·åšï¼Œæ•æ‰æˆ–è€…æŠ›å‡ºï¼ˆæœ€å¥½ä¸è¦æŠ›å‡ºï¼Œå› ä¸ºå®ƒæœ‰å¯èƒ½åŒ…æ˜¯é”™è¯¯ï¼‰æ™®é€šå¼‚å¸¸æ˜¯ä¸æ°å½“çš„ï¼Œè¿™æ ·æ˜¯éå¸¸å±é™©çš„ï¼Œä½ æœ‰å¯èƒ½æ•æ‰åˆ°ç³»ç»Ÿçº§åˆ«çš„é”™è¯¯ï¼ˆåƒRuntimeExceptionså’ŒClassCastExceptionï¼‰ï¼Œè€Œä½ çš„ä»£ç å°±è¦†ç›–äº†ä»–ä»¬çš„æç¤ºã€‚æ„å‘³ç€æœ‰æ—¶æœ‰æ–°ç±»å‹çš„å¼‚å¸¸å‘ç”Ÿåœ¨è¿™æ®µä»£ç ï¼Œç¼–è¯‘å™¨ä¸ä¼šæç¤ºä½ å»å¤„ç†æ–°ç±»å‹çš„å¼‚å¸¸ï¼Œå¤šæ•°æƒ…å†µä¸‹ä¸åº”è¯¥ç”¨åŒæ ·çš„æ–¹å¼å¤„ç†ä¸åŒçš„å¼‚å¸¸ã€‚_ - éµä»Androidä»£ç è§„èŒƒ

### 2.1.3 å¼‚å¸¸åˆ†ç»„

åœ¨ç›¸åŒä½ç½®æœ‰ä¸åŒçš„å¼‚å¸¸å‘ç”Ÿï¼Œä¸ºäº†å¢åŠ ä»£ç å¯è¯»æ€§å’Œé¿å…é‡å¤ä»£ç ï¼Œä½ åº”è¯¥å¦‚ä¸‹è¿™æ ·åšï¼š

```java
public void openCustomTab(Context context, @Nullable Uri uri) {
    Intent intent = buildIntent(context, uri);
    try {
        context.startActivity(intent);
    } catch (ActivityNotFoundException e) {
        Log.e(TAG, "There was an error opening the custom tab " + e);
    } catch (NullPointerException e) {
        Log.e(TAG, "There was an error opening the custom tab " + e);
    } catch (SomeOtherException e) {
        // Show some dialog
    }
}
```

ä¹Ÿå¯ä»¥è¿™æ ·åš:

```java
public void openCustomTab(Context context, @Nullable Uri uri) {
    Intent intent = buildIntent(context, uri);
    try {
        context.startActivity(intent);
    } catch (ActivityNotFoundException e | NullPointerException e) {
        Log.e(TAG, "There was an error opening the custom tab " + e);
    } catch (SomeOtherException e) {
        // Show some dialog
    }
}
```

### 2.1.4 ä½¿ç”¨try-catchæ¥æŠ›å‡ºå¼‚å¸¸

ä½¿ç”¨try-catchè¯­å¥æ”¹å–„å‘ç”Ÿå¼‚å¸¸ä»£ç çš„å¯è¯»æ€§ã€‚å½“å¼‚å¸¸å‡ºç°æ˜¯ï¼Œæ›´å®¹æ˜“è°ƒè¯•å’Œå¤„ç†é”™è¯¯ã€‚

### 2.1.6 ç¦æ­¢å…¨éƒ¨å¯¼å…¥

å½“å¯¼å…¥åº“æ—¶ï¼Œä¸åº”è¯¥å¯¼å…¥å…¨éƒ¨åŒ…ï¼Œæ¯”å¦‚ï¼š

```java
import android.support.v7.widget.*;
```

ç›¸åï¼Œåº”è¯¥è¿™æ ·ï¼š

```java
import android.support.v7.widget.RecyclerView;
```

### 2.1.7 ä¸è¦ä¿ç•™æ²¡ä½¿ç”¨çš„åº“

æœ‰æ—¶åˆ é™¤ä¸€äº›ä»£ç è€Œæœ‰çš„åº“ä¸å†ä½¿ç”¨ï¼Œé‚£ä¹ˆåº”è¯¥åˆ é™¤å¯¼å…¥è¿™äº›åº“çš„ä»£ç ã€‚

## 2.2 Javaä»£ç è§„èŒƒ

### 2.2.1 å­—æ®µå®šä¹‰å’Œå‘½å

æ‰€æœ‰å±æ€§åº”åœ¨è¯¥æ–‡ä»¶çš„é¡¶éƒ¨è¢«å£°æ˜, éµå¾ªä¸‹é¢çš„è§„åˆ™:

- ä¸æ˜¯é™æ€ç§æœ‰å±æ€§ä¸è¦ä½¿ç”¨`m`å¼€å§‹ï¼Œæ­£ç¡®ç¤ºä¾‹ï¼š

```
userSignedIn, userNameText, acceptButton
```

é”™è¯¯ç¤ºèŒƒ:

```
mUserSignedIn, mUserNameText, mAcceptButton
```

- é™æ€ç§æœ‰å±æ€§ä½¿ç”¨éœ€è¦ä½¿ç”¨`s`å¼€å§‹,æ­£ç¡®ç¤ºä¾‹ï¼š

```
someStaticField, userNameText
```

é”™è¯¯ç¤ºèŒƒ:

```
sSomeStaticField, sUserNameText
```

- å…¶ä»–å±æ€§ä½¿ç”¨å°å†™å­—æ¯å¼€å¤´ï¼š

```java
int numOfChildren;
String username;
```

- é™æ€çš„ç»ˆæ€ï¼ˆfinalï¼‰å±æ€§ï¼ˆå³å¸¸é‡ï¼‰ï¼Œæ‰€æœ‰å­—æ¯è¦å¤§å†™ã€‚

```java
private static final int PAGE_COUNT = 0;
```

å±æ€§åç§°ä¸åº”å®šä¹‰æ¨¡ç³Šï¼Œæ¯”å¦‚ï¼š

```java
int e; //åˆ—è¡¨ä¸­çš„å…ƒç´ çš„æ•°ç›®
```

ä½¿ç”¨ä»–çš„ä½œç”¨ä½œä¸ºåç§°ï¼Œè€Œä¸æ˜¯ç•™ä¸‹æ³¨é‡Šæ¥è¯´æ˜ã€‚è¿™æ ·æ›´å¥½

```java
int numberOfElements;
```

### 2.2.1.2 Viewå±æ€§å

å½“å±æ€§æ¶‰åŠviewsæ—¶ï¼Œåç§°çš„æœ€åä¸€ä¸ªå•è¯åº”è¯¥æ˜¯`view`,æ¯”å¦‚ï¼š

View           | Name
-------------- | -----------------
TextView       | usernameView
Button         | acceptLoginView
ImageView      | profileAvatarView
RelativeLayout | profileLayout

è¿™æ ·æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ç¡®è®¤å±æ€§å±äºè°ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªå­—æ®µä¸­å‘½åä¸º**ç”¨æˆ·**ï¼Œä»–æ˜¯ä¸€ä¸ªéå¸¸æ¨¡ç³Šçš„åç§°ã€‚ç»™å®ƒçš„å‘½åä¸ºusernameViewï¼ŒuserAvatarViewæˆ–userProfieLayoutæœ‰åŠ©äºå¼„æ¸…æ¥šå±æ€§å±äºè°ã€‚

åœ¨ä»¥å‰é€šå¸¸ä½¿ç”¨viewçš„ç±»å‹ä½œä¸ºç»“å°¾ï¼ˆacceptLoginButtonï¼‰ï¼Œä½†å½“viewså‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€šå¸¸ä¼šå¿˜è®°å›åˆ°javaç±»ä¸­å»ä¿®æ”¹å±æ€§åç§°ã€‚

### 2.2.2 é¿å…ä¸å®¹å™¨ç±»å‹ç›¸åŒ

å½“åˆ›å»ºä¸€ä¸ªé›†åˆå˜é‡æ—¶ï¼Œæˆ‘ä»¬å‘½ååº”è¯¥é¿å…ä½¿ç”¨å®¹å™¨ç±»å‹ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«ç”¨æˆ·åˆ—è¡¨ArrayList

åº”è¯¥è¿™æ ·å‘½åï¼š

```java
List<String> userIds = new ArrayList<>();
```

è€Œä¸åº”è¯¥ï¼š

```java
List<String> userIdList = new ArrayList<>();
```

å½“æˆ‘ä»¬æ›´æ”¹å®¹å™¨æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¿˜è®°æ›´æ”¹åç§°ï¼Œå°±åƒviewçš„å‘½åï¼Œä»–æ˜¯ä¸å¿…è¦çš„ã€‚æ­£ç¡®çš„åç§°åŒ…å«ä»–çš„å±æ€§ä¿¡æ¯å°±è¶³å¤Ÿäº†ã€‚

### 2.2.3 é¿å…ç›¸ä¼¼çš„åç§°

å‘½åç›¸ä¼¼åç§°çš„å˜é‡ã€æ–¹æ³•æˆ–ç±»ï¼Œä¼šä½¿å…¶ä»–å¼€å‘äººå‘˜é˜…è¯»ä»£ç æ—¶äº§ç”Ÿæ··æ·†ï¼Œæ¯”å¦‚ï¼š

```
hasUserSelectedSingleProfilePreviously

hasUserSelectedSignedProfilePreviously
```

ä¹çœ‹ä¹‹ä¸‹å¯èƒ½å¾ˆéš¾æ‰¾åˆ°ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚ä¸€ä¸ªæ›´æ¸…æ™°çš„å‘½åæ–¹å¼å¯ä»¥ä½¿å¼€å‘äººå‘˜æ›´å®¹æ˜“æ“ä½œä½ çš„ä»£ç ã€‚

### 2.2.4 è¿ç»­æ•°å­—å‘½å

å½“Android Studioç»™æˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºä»£ç æ—¶ï¼Œä»–ä¼šä½¿ç”¨è¿ç»­æ•°å­—å‘½åï¼Œè¿™æ˜¯å‚æ•°å‘½åæ˜¯å¯æ€•çš„ï¼æ¯”å¦‚ï¼Œè¿™æ ·ä¸å¤ªå¥½ï¼š

```java
public void doSomething(String s1, String s2, String s3)
```

æ²¡æœ‰é˜…è¯»æ³¨é‡Šå¾ˆéš¾äº†è§£è¿™äº›å‚æ•°ï¼Œç›¸åï¼š

```java
public void doSomething(String userName, String userEmail, String userId)
```

è¿™æ ·å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œç°åœ¨æˆ‘ä»¬æ ¹æ®ä»£ç å°±èƒ½å¤Ÿæ¸…æ™°çš„äº†è§£å‚æ•°çš„æ„ä¹‰ğŸ™‚

### 2.2.5 æ˜“è¯†åˆ«çš„å‘½å

å½“å‘½åå±æ€§ã€æ–¹æ³•å’Œç±»æ—¶åº”è¯¥ï¼š

- å®¹æ˜“é˜…è¯»ï¼šæœ‰æ•ˆçš„å‘½åèƒ½å¤Ÿé˜…è¯»åŒæ—¶å°±èƒ½ç†è§£ä»–è¡¨è¾¾çš„æ„æ€ï¼Œå‡å°‘å»ç†è§£ä»–çš„æ„ä¹‰æ¶ˆè€—çš„æ—¶é—´ã€‚

- å®¹æ˜“å‘éŸ³ï¼šå®¹æ˜“æœ—è¯»çš„å‘½åï¼Œå¯ä»¥é¿å…å½“ä½ å’Œä»–äººå¯¹è¯æ—¶ä½ è¯•å›¾å‘éŸ³ä¸€ä¸ªå‘½åçš„å°´å°¬ã€‚

- å®¹æ˜“å¯»æ‰¾ï¼šæ²¡æœ‰ä»€ä¹ˆæ¯”è¯•å›¾åœ¨ä¸€ä¸ªç±»ä¸­å¯»æ‰¾ä¸€ä¸ªè¢«æ‹¼å†™é”™äº†ï¼ˆæˆ–ä¸¥é‡ç³Ÿç³•ï¼‰çš„æ–¹æ³•æˆ–å˜é‡æ›´ç³Ÿç³•äº†ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾æ‰¾åˆ°**æœç´¢ç”¨æˆ·**çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå½“æœç´¢`search`æ—¶ä»–å°±åº”è¯¥å‡ºç°ã€‚

- ä¸è¦ä½¿ç”¨åŒˆç‰™åˆ©è¡¨ç¤ºæ³•ï¼šåŒˆç‰™åˆ©è¡¨ç¤ºæ³•è¿èƒŒä¸Šè¿°æå‡ºçš„ä¸‰ç‚¹ï¼Œæ‰€ä»¥ç»å¯¹ä¸èƒ½ç”¨ï¼

### 2.2.6 ç¼©å†™çš„å•è¯å¿…é¡»å¤§å†™

æ‰€æœ‰çš„åŒ…å«ç¼©å†™çš„ç±»ã€å˜é‡åç­‰éƒ½åº”è¯¥ä½¿ç”¨å¤§å†™æ¥å¤„ç†ã€‚æ¯”å¦‚ï¼š

Good            | bad
--------------- | ---------------
setUserId       | setUserID
String uri      | String URI
int id          | int ID
parseHtml       | parseHTML
generateXmlFile | generateXMLFile

### 2.2.7 é¿å…ç‰¹æ®Šæ•´ç†å˜é‡ç”³æ˜

æ‰€æœ‰çš„å˜é‡ç”³æ˜ä¸åº”è¯¥ä½¿ç”¨ç‰¹æ®Šæ–¹å¼æ¥å¯¹é½ã€‚æ¯”å¦‚ï¼š

æ­£å¸¸çš„ä»£ç :

```java
private int userId = 8;
private int count = 0;
private String username = "hitherejoe";
```

é¿å…è¿™æ ·:

```java
private String username = "hitherejoe";
private int userId      = 8;
private int count       = 0;
```

è¿™ç§å£°æ˜æ–¹å¼åœ¨é˜…è¯»æ—¶å¯èƒ½éš¾ä»¥ç†è§£ç©ºç™½çš„å­—ç¬¦ä¸²ã€‚

### 2.2.8 ç¼©è¿›

å¯¹äºä»£ç å—ï¼Œç¼©è¿›åº”è¯¥ä½¿ç”¨4ä¸ªç©ºæ ¼ï¼š

```java
if (userSignedIn) {
    count = 1;
}
```

è€Œå½“åŒ…è£¹å¤šè¡Œï¼Œç¼©è¿›åº”è¯¥ä½¿ç”¨8ä¸ªç©ºæ ¼ï¼š

```java
String userAboutText =
            "This is some text about the user and it is pretty long, can you see!"
```

## 2.2.9 If-Statements

### 2.2.9.1 å¤§æ‹¬å·è§„èŒƒ

å¤§æ‹¬å·é€šå¸¸åº”è¯¥å’Œä»–ä¹‹å‰çš„ä»£ç åŒè¡Œï¼Œé¿å…è¿™æ ·ï¼š

```java
class SomeClass
{
    private void someFunction()
    {
        if (isSomething)
        {

        }
        else if (!isSomethingElse)
        {

        }
        else
        {

        }
    }
}
```

è¿™æ ·æ›´å¥½:

```java
class SomeClass {
    private void someFunction() {
        if (isSomething) {

        } else if (!isSomethingElse) {

        } else {

        }
    }
}
```

ç‰¹åˆ«å¢åŠ ä¸€è¡Œå®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œä¹Ÿä¸ä¼šæ›´å®¹æ˜“é˜…è¯»ä»£ç ã€‚

### 2.2.9.2 å•è¡Œifè¯­å¥

æœ‰æ—¶ä½¿ç”¨å•è¡Œifè¯­å¥æ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚ï¼š

```java
if (user == null) return false;
```

ç„¶è€Œï¼Œè¿™åªèƒ½æ˜¯åœ¨ç®€å•çš„æ“ä½œæ—¶ï¼Œè€Œè¿™æ ·çš„ä»£ç ä¼šæ›´é€‚åˆç”¨å¤§æ‹¬å·ï¼š

```java
if (user == null) throw new IllegalArgumentExeption("Oops, user object is required.");
```

è¿™æ ·æ›´å¥½ï¼š

```java
if (user == null) {
    throw new IllegalArgumentExeption("Oops, user object is required.");
}
```

### 2.2.9.3 æ¡ä»¶åµŒå¥—

å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ¡ä»¶èƒ½åˆå¹¶ï¼Œå°±åº”è¯¥é¿å…å¤æ‚çš„åµŒå¥—ã€‚æ¯”å¦‚ï¼š

Do:

```java
if (userSignedIn && userId != null) {

}
```

Try to avoid:

```java
if (userSignedIn) {
    if (userId != null) {

    }
}
```

è¿™ä½¿å¾—è¯­å¥æ›´å®¹æ˜“é˜…è¯»å¹¶ä¸”åµŒå¥—é™¤å»äº†é¢å¤–çš„è¡Œã€‚

### 2.2.9.4 ä¸‰å…ƒè¿ç®—

åœ¨åˆé€‚çš„åœ°æ–¹ï¼Œä½¿ç”¨ä¸‰å…ƒè¿ç®—ç®€åŒ–æ“ä½œï¼Œæ¯”å¦‚ï¼Œè¿™æ ·æ›´å®¹æ˜“é˜…è¯»ï¼š

```java
userStatusImage = signedIn ? R.drawable.ic_tick : R.drawable.ic_cross;
```

è€Œä¸”ä½¿ç”¨æ›´å°‘çš„è¡Œæ¯”ä¸‹é¢è¿™æ ·ï¼š

```java
if (signedIn) {
    userStatusImage = R.drawable.ic_tick;
} else {
    userStatusImage = R.drawable.ic_cross;
}
```

## 2.2.10 é¢„å®šä¹‰çš„æ³¨é‡Š

### 2.2.10.1 æ³¨é‡Šå®ä¾‹

Androidä»£ç é£æ ¼ï¼š

**@Override:** @Override æ³¨é‡Šå¿…é¡»æ˜¯æ–¹æ³•å£°æ˜è¦†ç›–äº†å®ç°çš„æ¥å£æˆ–çˆ¶ç±»çš„æ–¹æ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ ä½¿ç”¨@inheritdocs Javadocæ ‡ç­¾ï¼Œä»ä¸€ä¸ªç±»æ´¾ç”Ÿï¼ˆä¸æ˜¯å®ç°ï¼‰ï¼Œä½ ä¹Ÿå¿…é¡»æ ‡æ³¨è¯¥æ–¹æ³•@Overridesäº†çˆ¶ç±»çš„æ–¹æ³•

**@SuppressWarnings:** @SuppressWarnings æ³¨é‡Šåº”è¯¥åªåœ¨å®ƒæ˜¯ä¸å‡ºç°è­¦å‘Šçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚æœè­¦å‘Šä½ ç¡®å®šå®ƒä¸æ˜¯é—®é¢˜ï¼Œå°±åº”è¯¥ä½¿ç”¨@SuppressWarningã€‚æ‰€ä»¥ç¡®ä¿æ‰€æœ‰è­¦å‘Šçš„ä»£ç æ²¡æœ‰é—®é¢˜ã€‚

æ³¨é‡Šå°½å¯èƒ½å¤šã€‚æ¯”å¦‚ï¼Œå½“ä½ ä¸€ä¸ªå±æ€§å¯èƒ½æ˜¯ç©ºæ—¶å¯ä»¥ç”¨@Nullableæ³¨é‡Šï¼Œä¾‹å­ï¼š

```java
@Nullable TextView userNameText;

private void getName(@Nullable String name) { }
```

### 2.2.10.2 æ³¨é‡Šé£æ ¼

æ‰€åº”ç”¨æ–¹æ³•æˆ–ç±»çš„æ³¨é‡Šåº”è¯¥åœ¨å£°æ˜ä¸­å®šä¹‰ï¼Œæ¯ä¸ªæ³¨é‡Šå•ç‹¬ä¸€è¡Œï¼š

```java
@Annotation
@AnotherAnnotation
public class SomeClass {

  @SomeAnotation
  public String getMeAString() {

  }

}
```

å½“ç»™å±æ€§æ·»åŠ æ³¨é‡Šæ—¶ï¼Œåº”è¯¥ç¡®ä¿æ³¨é‡Šåœ¨åŒä¸€è¡Œä¸Šä¸”æœ‰å¤šä½™ç©ºé—´ã€‚æ¯”å¦‚ï¼š

```java
@Bind(R.id.layout_coordinator) CoordinatorLayout coordinatorLayout;

@Inject MainPresenter mainPresenter;
```

æˆ‘ä»¬è¿™æ ·åšæ˜¯å› ä¸ºå®ƒä½¿è¯­å¥æ›´æ˜“äºé˜…è¯»ã€‚ä¾‹å¦‚ï¼Œ`@Inject SomeComponent mSomeName`æ„å‘³ç€è¿™ä¸ªå˜é‡ä»£è¡¨æ­¤ç»„ä»¶

### 2.2.11 é™åˆ¶å˜é‡çš„ä½œç”¨åŸŸ

å±€éƒ¨å˜é‡çš„èŒƒå›´åº”ä¿æŒåœ¨æœ€ä½é™åº¦ï¼ˆEffective Java Item 29ï¼‰ã€‚é€šè¿‡è¿™æ ·åšï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå‡å°‘å‡ºé”™çš„å¯èƒ½æ€§ã€‚æ¯ä¸ªå˜é‡éƒ½åº”è¯¥åœ¨å°é—­åœ¨æ‰€ç”¨çš„ä»£ç å—ä¸­ï¼Œå¤–éƒ¨ä¸å¯ä»¥è®¿é—®ã€‚

å±€éƒ¨å˜é‡åº”å½“åœ¨å…¶ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶å£°æ˜ï¼Œæ¯ä¸ªå±€éƒ¨å˜é‡ç”³æ˜æ—¶éƒ½è¦åˆå§‹åŒ–ã€‚å¦‚æœä½ æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥åˆå§‹åŒ–å˜é‡ï¼Œä½ åº”è¯¥æ¨è¿Ÿç”³æ˜å˜é‡ï¼Œç›´åˆ°ä½ è¦ä½¿ç”¨ä»–ã€‚-- Androidä»£ç é£æ ¼

### 2.2.12 æœªä½¿ç”¨çš„å…ƒç´ 

æ‰€æœ‰æœªä½¿ç”¨çš„**å±æ€§** ã€**å¯¼å…¥ï¼ˆimportsï¼‰** ã€**æ–¹æ³•** å’Œ**ç±»**åº”è¯¥ä»ä»£ç ä¸­åˆ é™¤ï¼Œé™¤éåé¢æ³¨é‡Šæœ‰å®ƒæœ‰ä»»ä½•å…·ä½“çš„ç†ç”±ã€‚

### 2.2.13 å¯¼å…¥é¡ºåº

ä½¿ç”¨Android Studioæ—¶ï¼Œå¯¼å…¥ä¼šè‡ªåŠ¨æ’åºã€‚è€Œå…¶ä»–æƒ…å†µæ—¶ä¹Ÿè®¸ä¸ä¼šè‡ªåŠ¨æ’åºï¼Œè¿™æ—¶æˆ‘ä»¬åº”è¯¥æ‰‹åŠ¨æ’åºæ ¹æ®ï¼š

1. Androidåº“çš„å¯¼å…¥
2. ç¬¬ä¸‰æ–¹åº“çš„å¯¼å…¥
3. J2EEå’ŒJ2SEçš„å¯¼å…¥
4. å½“å‰é¡¹ç›®æ–‡ä»¶ä¸­çš„å¯¼å…¥

**æ³¨æ„ï¼š**

- å¯¼å…¥åº”è¯¥æŒ‰ç…§å­—æ¯é¡ºåºæ’åˆ—ï¼Œå¤§å†™å­—æ¯åº”åœ¨å°å†™ä¹‹å‰ï¼ˆæ¯”å¦‚Zåœ¨aå‰ï¼‰ã€‚

- æ¯ç§åˆ†ç»„ä¹‹é—´åº”è¯¥ç”¨ç©ºè¡Œéš”å¼€ï¼Œ(android, com, JUnit, net, org, java, javax)

### 2.2.14 æ—¥å¿—ï¼ˆLoggingï¼‰

æ—¥å¿—åº”è¯¥è®°å½•åœ¨å¼€å‘æ—¶æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯æˆ–å…¶ä»–ä¿¡æ¯ã€‚

Log                               | Reason
--------------------------------- | -----------
Log.v(String tag, String message) | verbose
Log.d(String tag, String message) | debug
Log.i(String tag, String message) | information
Log.w(String tag, String message) | warning
Log.e(String tag, String message) | error

æˆ‘ä»¬å¯ä»¥åœ¨ç±»å¼€å§‹ä½ç½®è®¾ç½®`static final`çš„`TAG`å±æ€§è®©`log`ä½¿ç”¨ã€‚ä¾‹å­ï¼š

```java
private static final String TAG = MyActivity.class.getName();
```

åœ¨å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ä¸åº”è¯¥è®°å½•`verbose`å’Œ`debug`çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ã€‚å…¶ä»–çº§åˆ«çš„`information` `warning` `error`æ—¥å¿—ä¿¡æ¯è¿˜æ˜¯åº”è¯¥ç»§ç»­è®°å½•ã€‚

```java
if (BuildConfig.DEBUG) {
    Log.d(TAG, "Here's a log message");
}
```

**æ³¨æ„:** Timberåœ¨ä½¿ç”¨æ—¶æ˜¯ä¼˜äºLogæ–¹æ³•çš„ã€‚ä»–ä¸ºæˆ‘ä»¬å¤„ç†TAGï¼Œä¸æ˜¯æˆ‘ä»¬å»è®¾å®šTAGã€‚

### 2.2.15 å±æ€§çš„æ’åº

åœ¨ç±»æ–‡ä»¶çš„é¡¶éƒ¨å£°æ˜çš„ä»»ä½•å±æ€§åº”è¯¥æŒ‰ä»¥ä¸‹é¡ºåºè¿›è¡Œæ’åºï¼š

1. æšä¸¾ç±»å‹ï¼ˆEnumsï¼‰
2. å¸¸é‡
3. ä¾èµ–æ³¨å…¥
4. æ³¨è§£å¼ç»‘å®šæ§ä»¶
5. ç§æœ‰å…¨å±€å˜é‡
6. å…¬å…±å…¨å±€å˜é‡

For example:

```java
public static enum {
    ENUM_ONE, ENUM_TWO
}

public static final String KEY_NAME = "KEY_NAME";
public static final int COUNT_USER = 0;

@Inject SomeAdapter someAdapter;

@BindView(R.id.text_name) TextView nameText;
@BindView(R.id.image_photo) ImageView photoImage;

private int userCount;
private String errorMessage;

public int someCount;
public String someString;
```

ä½¿ç”¨è¯¥æ’åºä¹ æƒ¯æœ‰åŠ©äºå­—æ®µå£°æ˜è¿›è¡Œåˆ†ç»„ï¼Œä»è€Œæ–¹ä¾¿å±æ€§çš„å®šä½å’Œå¯è¯»æ€§ã€‚

### 2.2.16 ç±»æˆå‘˜æ’åº

ä¸ºäº†æ”¹å–„ä»£ç å¯è¯»æ€§ï¼ŒæŒ‰ä¸€å®šé€»è¾‘çš„å¯¹ç±»æˆå‘˜è¿›è¡Œæ’åºæ˜¯éå¸¸é‡è¦çš„ã€‚åº”è¯¥æŒ‰ä»¥ä¸‹è§„åˆ™æ¥æ’åºï¼š

1. å¸¸é‡
2. å±æ€§
3. æ„é€ å‡½æ•°
4. è¦†ç›–çš„æ–¹æ³•å’Œå›è°ƒæ–¹æ³•ï¼ˆç§æœ‰æˆ–å…¬å…±çš„ï¼‰
5. å…¬å…±æ–¹æ³•
6. ç§æœ‰æ–¹æ³•
7. å†…éƒ¨ç±»æˆ–å†…éƒ¨æ¥å£

å®ä¾‹:

```java
public class MainActivity extends Activity {

    private int count;

    public static newInstance() { }

    @Override
    public void onCreate() { }

    public setUsername() { }

    private void setupUsername() { }

    static class AnInnerClass { }

    interface SomeInterface { }

}
```

æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åº”è¯¥æŒ‰ç…§å®‰å“æ¡†æ¶ç±»å®šä¹‰çš„ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ¥æ’åºï¼Œæ¯”å¦‚ï¼š

```java
public class MainActivity extends Activity {

    // Field and constructors

    @Override
    public void onCreate() { }

    @Override
    public void onStart() { }

    @Override
    public void onResume() { }

    @Override
    public void onPause() { }

    @Override
    public void onStop() { }

    @Override
    public void onRestart() { }

    @Override
    public void onDestroy() { }

    // public methods, private methods, inner classes and interfaces

}
```

### 2.2.17 æ–¹æ³•å‚æ•°çš„æ’åº

å®šä¹‰æ–¹æ³•æ—¶ï¼Œå‚æ•°æ’åºåº”è¯¥éµå¾ªï¼š

```java
public Post loadPost(Context context, int postId);

public void loadPost(Context context, int postId, Callback callback);
```

**Context** å‚æ•°å§‹ç»ˆåœ¨ç¬¬ä¸€ä½ **Callback** å‚æ•°å§‹ç»ˆåœ¨æœ€å°¾ã€‚

### 2.2.18 å­—ç¬¦ä¸²å¸¸é‡å‘½åå’Œå€¼ ï¼ˆ*****ï¼‰

å½“ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œå®ƒä»¬åº”è¯¥è¢«å£°æ˜ä¸ºfinalçš„é™æ€å’Œä½¿ç”¨å¦‚ä¸‹çº¦å®šï¼š

[Strings table]

**æ³¨æ„** ç¿»è¯‘ä¸æ‡‚?

### 2.2.19 æšä¸¾ï¼ˆEnumsï¼‰ ï¼ˆ*****ï¼‰

éœ€è¦æ—¶æ‰ä½¿ç”¨æšä¸¾ï¼Œå¦‚æœåœ¨å…¶ä»–æ–¹æ³•éœ€è¦ï¼Œé‚£ä¹ˆå®ç°çš„æ–¹å¼ä¸åº”è¯¥ç”¨æšä¸¾ã€‚

ä¸åº”è¯¥è¿™æ ·ä½¿ç”¨ï¼š

```java
public enum SomeEnum {
    ONE, TWO, THREE
}
```

è¿™æ ·æ›´å¥½ï¼š

```java
private static final int VALUE_ONE = 1;
private static final int VALUE_TWO = 2;
private static final int VALUE_THREE = 3;
```

### 2.2.20 Fragmentså’ŒActivitiesçš„å‚æ•° ï¼ˆ*****ï¼‰

å½“æˆ‘ä»¬ä½¿ç”¨Intentæˆ–Bundleä¼ é€’æ•°æ®æ—¶ï¼Œé”®åå’Œå€¼å¿…é¡»è§„èŒƒã€‚

**Activity**

ä¼ é€’æ•°æ®åˆ°å…¶ä»–Activityå¿…é¡»ä½¿ç”¨KEYï¼Œå®šä¹‰éµå¾ªï¼š

```java
private static final String KEY_NAME = "com.your.package.name.to.activity.KEY_NAME";
```

**Fragment**

ä¼ é€’æ•°æ®åˆ°å…¶ä»–Activityå¿…é¡»ä½¿ç”¨EXTRAï¼Œå®šä¹‰éµå¾ªï¼š

```java
private static final String EXTRA_NAME = "EXTRA_NAME";
```

å½“åˆ›å»ºæ–°çš„Fragmentæˆ–Activityå®ä¾‹ï¼Œå‘å®ä¾‹ä¼ é€’æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•æ¥è·å–æ–°çš„å®ä¾‹ï¼Œä¼ é€’æ•°æ®çš„æ–¹æ³•å‚æ•°ã€‚ ä¾‹å¦‚ï¼š

**Activity**

```java
public static Intent getStartIntent(Context context, Post post) {
    Intent intent = new Intent(context, CurrentActivity.class);
    intent.putParcelableExtra(EXTRA_POST, post);
    return intent;
}
```

**Fragment**

```java
public static PostFragment newInstance(Post post) {
    PostFragment fragment = new PostFragment();
    Bundle args = new Bundle();
    args.putParcelable(ARGUMENT_POST, post);
    fragment.setArguments(args)
    return fragment;
}
```

### 2.2.21 è¡Œé•¿åº¦é™åˆ¶

ä»£ç é•¿åº¦å°½é‡ä¸è¦è¶…è¿‡100ä¸ªå­—ç¬¦ï¼Œä»–ä½¿å¾—æ›´éš¾é˜…è¯»ä»£ç ï¼Œä¸ºäº†è¿™æ ·æˆ‘ä»¬åº”è¯¥éµå¾ªï¼š

- æ•°æ®æå–åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡
- é€»è¾‘ç”±å¤–éƒ¨æ–¹æ³•å®ç°
- æœ‰çš„ä»£ç å¯ä»¥æ¢è¡Œåˆ†å‰²æˆå‡ è¡Œ

**æ³¨æ„:** å¯¹äºæ³¨é‡Šå’Œimportè¯­å¥ä¸å­˜åœ¨100å­—ç¬¦çš„é™åˆ¶

### 2.2.21.1 æ¢è¡ŒæŠ€å·§

å¯¹äºå¤ªé•¿çš„ä¸€è¡Œåˆ†å‰²æˆå‡ è¡Œçš„ä»£ç ï¼Œæˆ‘ä»¬åº”è¯¥ä¿æŒä»£ç çš„æ ·å¼ä¸€è‡´ã€‚

**åˆ†å‰²è¿ç®—**

æœ‰æ—¶ä½¿ç”¨è¿ç®—ç¬¦ï¼Œå¯¼è‡´è¿™ä¸€è¡Œå¤ªé•¿ï¼Œæˆ‘ä»¬åº”è¯¥åˆ†å‰²è¿™ä¸ªè¿ç®—ç¬¦ã€‚

```java
int count = countOne + countTwo - countThree + countFour * countFive - countSix
        + countOnANewLineBecauseItsTooLong;
```

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è¿™æ ·åˆ†å‰²ï¼š

```
int count =
        countOne + countTwo - countThree + countFour * countFive + countSix;
```

**æ–¹æ³•é“¾**

ä½¿ç”¨æ–¹æ³•é“¾æ—¶ï¼Œå°½é‡ä¸è¦åœ¨ä¸€è¡Œä½¿ç”¨ã€‚

ä¸è¦è¿™æ ·

```java
Picasso.with(context).load("someUrl").into(imageView);
```

è€Œè¯¥è¿™æ ·:

```java
Picasso.with(context)
        .load("someUrl")
        .into(imageView);
```

**å¤ªé•¿çš„å‚æ•°**

åœ¨æœ‰çš„æ–¹æ³•ä¸­åŒ…å«è®¸å¤šçš„å‚æ•°ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨é€‚å½“æƒ…å†µä¸‹æ¢è¡Œã€‚æ¯”å¦‚æˆ‘ä»¬ç”³æ˜æ–¹æ³•æ—¶æœ‰å¤ªå¤šçš„å‚æ•°æ—¶ï¼Œæˆ‘ä»¬åœ¨åˆé€‚çš„å‚æ•°åé¢æ¢è¡Œï¼š

```java
private void someMethod(Context context, String someLongStringName, String text,
                            long thisIsALong, String anotherString) {               
}
```

å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æ¯ä¸ªå‚æ•°éƒ½æ¢è¡Œï¼š

```java
someMethod(context,
        "thisIsSomeLongTextItsQuiteLongIsntIt",
        "someText",
        01223892365463456,
        "thisIsSomeLongTextItsQuiteLongIsntIt");
```

### 2.2.22 æ–¹æ³•é—´éš”

åœ¨æ–¹æ³•ä¹‹é—´åªåº”è¯¥ç©ºä¸€è¡Œã€‚

æ­£ç¡®ï¼š

```java
public String getUserName() {
    // Code
}

public void setUserName(String name) {
    // Code
}

public boolean isUserSignedIn() {
    // Code
}
```

é”™è¯¯ç¤ºèŒƒï¼š

```java
public String getUserName() {
    // Code
}


public void setUserName(String name) {
    // Code
}


public boolean isUserSignedIn() {
    // Code
}
```

## 2.2.23 æ³¨é‡Š

### 2.2.23.1 è¡Œå†…æ³¨é‡Š

åœ¨å¿…è¦æ—¶ï¼Œå†…éƒ¨æ³¨é‡Šè¢«ç”¨æ¥å‘è¯»è€…æä¾›è¿™ä¸€æ®µä»£ç çš„æ„ä¹‰ï¼Œå®ƒåªåº”åœ¨ä»£ç å¤æ‚éš¾ä»¥ç†è§£çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»£ç åº”è¯¥è¢«å†™çš„ç›¸å½“ç®€å•ä¾¿äºé˜…è¯»è€Œä¸éœ€è¦æ³¨é‡Š

**æ³¨æ„:** è¡Œå†…æ³¨é‡Šå°½é‡ä¿æŒä¸è¶…è¿‡100å­—ç¬¦

### 2.2.23.2 JavaDocé£æ ¼æ³¨é‡Š

æ–¹æ³•çš„åº”è¯¥å‘½åä¸ºæè¿°æ–¹æ³•çš„åŠŸèƒ½ã€‚JavaDocé£æ ¼æ³¨é‡Šçš„å†…å®¹ï¼Œæ˜¯ä½¿å¾—æ›´å®¹æ˜“ç†è§£æ–¹æ³•çš„åŠŸèƒ½ï¼Œä»¥åŠä¼ é€’åˆ°æ–¹æ³•çš„æ‰€æœ‰å‚æ•°çš„ä½œç”¨ã€‚

```java
/**
 * Authenticates the user against the API given a User id.
 * If successful, this returns a success result
 *
 * @param userId The user id of the user that is to be authenticated.
 */
```

### 2.2.23.3 ç±»æ³¨é‡Š

åˆ›å»ºçš„ç±»æ³¨é‡Šåº”è¯¥æ˜¯æœ‰æ„ä¹‰çš„ã€æè¿°æ€§çš„ã€‚åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨@linkï¼Œä¾‹å¦‚ï¼š

```java
/**
  * RecyclerView adapter to display a list of {@link Post}.
  * Currently used with {@link PostRecycler} to show the list of Post items.
  */
```

å…³äºä½œè€…æ³¨é‡Šï¼Œå½“æœ‰å¾ˆå¤šäººä½¿ç”¨å’Œä¿®æ”¹è¿™ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªæ³¨é‡Šå¹¶ä¸èƒ½æä¾›ä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ã€‚

```java
/**
  * Created By Joe 18/06/2016
  */
```

## 2.2.24 åˆ†å‰²ä»£ç 

### 2.2.24.1 Javaä»£ç 

å½“ä½¿ç”¨æ³¨é‡Šåˆ†å‰²ä»£ç æ—¶ï¼Œæ³¨é‡Šåº”è¯¥éµå¾ªä¸‹é¢è¿™æ ·çš„æ–¹å¼ï¼š

```java
public void method() { }

public void someOtherMethod() { }

/********* Mvp Method Implementations  ********/

public void anotherMethod() { }

/********* Helper Methods  ********/

public void someMethod() { }
```

ä¸è¦è¿™æ ·ï¼š

```java
public void method() { }

public void someOtherMethod() { }

// Mvp Method Implementations

public void anotherMethod() { }
```

è¿™ä½¿å¾—åˆ†å‰²çš„æ–¹æ³•æ¯”è¾ƒå®¹æ˜“åœ¨ä¸€ä¸ªç±»æ¥å®šä½ã€‚

### 2.2.24.2 å­—ç¬¦ä¸²æ–‡ä»¶

å­—ç¬¦ä¸²èµ„æºåœ¨`string.xml`æ–‡ä»¶ä¸­å®šä¹‰ï¼Œä¸”æŒ‰åŠŸèƒ½åˆ†å‰²æˆç»„ï¼Œæ¯”å¦‚ï¼š

```xml
// User Profile Activity
<string name="button_save">Save</string>
<string name="button_cancel">Cancel</string>

// Settings Activity
<string name="message_instructions">...</string>
```

è¿™ä¸ä»…æœ‰åŠ©äºä¿æŒå­—ç¬¦ä¸²æ–‡ä»¶æ•´é½ï¼Œè€Œä¸”å½“éœ€è¦æ”¹å˜å†…å®¹æ—¶æ›´å®¹æ˜“æ‰¾åˆ°å­—ç¬¦ä¸²ã€‚

### 2.2.24.3 RxJava chaining

å½“Rxé“¾å¼æ“ä½œæ—¶ï¼Œéƒ½åº”è¯¥åœ¨`.`ä¹‹å‰æ¢ä¸€è¡Œï¼Œæ¯”å¦‚ï¼š

```java
return dataManager.getPost()
            .concatMap(new Func1<Post, Observable<? extends Post>>() {
                @Override
                 public Observable<? extends Post> call(Post post) {
                     return mRetrofitService.getPost(post.id);
                 }
            })
            .retry(new Func2<Integer, Throwable, Boolean>() {
                 @Override
                 public Boolean call(Integer numRetries, Throwable throwable) {
                     return throwable instanceof RetrofitError;
                 }
            });
```

è¿™ä½¿å¾—æ›´å®¹æ˜“ç†è§£çš„é“¾æ“ä½œçš„æµç¨‹ã€‚

## 2.2.25 Butterknife

### 2.2.25.1 äº‹ä»¶ä¾¦å¬

åœ¨éœ€è¦æ—¶ï¼Œä½¿ç”¨Butterknifeç»‘å®šç›‘å¬å™¨ï¼Œæ¯”å¦‚å•å‡»äº‹ä»¶çš„ç»‘å®šå°±åº”è¯¥æ˜¯ï¼š

```java
mSubmitButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // Some code here...
    }
  };
```

ä¸æ˜¯è¿™æ ·ï¼š

```java
@OnClick(R.id.button_submit)
public void onSubmitButtonClick() { }
```

# 2.3 XMLæ ·å¼è§„åˆ™

## 2.3.1 ä½¿ç”¨è‡ªå·±çš„å…³é—­æ ‡ç­¾

å½“åœ¨ä¸€ä¸ªXMLå¸ƒå±€è§†å›¾æ²¡æœ‰ä»»ä½•å­æ ‡ç­¾æ—¶ï¼Œåº”ä½¿ç”¨è‡ªç»“æŸæ ‡ç­¾ã€‚

è¿™æ ·ï¼š

```xml
<ImageView
    android:id="@+id/image_user"
    android:layout_width="90dp"
    android:layout_height="90dp" />
```

ä¸è¦è¿™æ ·ï¼š

```xml
<ImageView
    android:id="@+id/image_user"
    android:layout_width="90dp"
    android:layout_height="90dp">
</ImageView>
```

## 2.3.2 èµ„æºå‘½å

æ‰€æœ‰çš„èµ„æºåç§°å’ŒIDéƒ½åº”è¯¥ä½¿ç”¨å°å†™å’Œä¸‹åˆ’çº¿ï¼Œç¤ºä¾‹ï¼š

```
text_username, activity_main, fragment_user, error_message_network_connection
```

è¿™æ ·å¯ä»¥ä¿æŒä¸€è‡´ï¼Œ å½“æƒ³æ›´æ”¹å¸ƒå±€æ–‡ä»¶æ—¶æ›´å®¹æ˜“æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚

### 2.3.2.1 IDå‘½å

æ‰€æœ‰çš„IDå‘½åéƒ½åº”è¯¥ä½¿ç”¨ä»–çš„å…ƒç´ ä½œä¸ºå‰ç¼€ã€‚

Element        | Prefix
-------------- | ---------
ImageView      | image_
Fragment       | fragment_
RelativeLayout | layout_
Button         | button_
TextView       | text_
View           | view_

æ¯”å¦‚:

```xml
<TextView
    android:id="@+id/text_username"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
```

ç‰¹æ®ŠViewåªå‡ºç°ä¸€æ¬¡åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç›´æ¥ç»™ä»–å®šä¹‰ä¸ºå…ƒç´ åç§°ã€‚æ¯”å¦‚`toolbar`ã€‚

### 2.3.2.2 å­—ç¬¦ä¸²

æ‰€æœ‰çš„å­—ç¬¦ä¸²åç§°åº”è¯¥ä¸ä»–ä»¬æ­£è¢«åº”ç”¨ç¨‹åºå¼•ç”¨çš„ä¸€éƒ¨åˆ†ä½œä¸ºå‰ç¼€å¼€å¤´ã€‚æ¯”å¦‚ï¼š

Screen                | String         | Resource Name
--------------------- | -------------- | -------------------------
Registration Fragment | "Register now" | registration_register_now
Sign Up Activity      | "Cancel"       | sign_up_cancel
Rate App Dialog       | "No thanks"    | rate_app_no_thanks

å¦‚æœè¿™æ˜¯ä¸è¢«å¼•ç”¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è§„åˆ™ï¼š

Prefix  | Description
------- | --------------------------------------------
error_  | Used for error messages
title_  | Used for dialog titles
action_ | Used for option menu actions
msg_    | Used for generic message such as in a dialog
label_  | Used for activity labels

å­—ç¬¦ä¸²èµ„æºæœ‰ä¸¤ä¸ªé‡ç‚¹ï¼š

- å­—ç¬¦ä¸²èµ„æºä¸åº”è¯¥åœ¨æ•´ä¸ªå±å¹•ä¸Šé‡å¤ä½¿ç”¨ã€‚å½“æƒ³æ”¹å˜å±å¹•ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ä¼šå‡ºç°é¢å¤–é—®é¢˜ã€‚æ¯å¤„ä½¿ç”¨å•ç‹¬çš„å­—ç¬¦ä¸²å®šä¹‰è§£å†³æœªæ¥å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜

- å­—ç¬¦ä¸²**é€šå¸¸**åœ¨`strings.xml`ä¸­å®šä¹‰ï¼Œä¸å†ç±»æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²ã€‚

### 2.3.2.3 æ ·å¼å’Œä¸»é¢˜

å½“å®šä¹‰æ ·å¼å’Œä¸»é¢˜æ—¶ï¼Œé€šå¸¸ä½¿ç”¨é©¼å³°å‘½åæ³•æ¥å‘½åã€‚æ¯”å¦‚ï¼š

```
AppTheme.DarkBackground.NoActionBar
AppTheme.LightBackground.TransparentStatusBar

ProfileButtonStyle
TitleTextStyle
```

## 2.3.3 å±æ€§æ’åº

å±æ€§çš„æ’åºä¸ä»…è¦æ±‚æ•´é½è€Œä¸”è¿˜è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­èƒ½å¿«é€Ÿå®šä½å±æ€§ã€‚ä¸»è¦è§„åˆ™ï¼š

1. View Id
2. Style
3. Layout width and layout height
4. Other `layout_` attributes, sorted alphabetically
5. Remaining attributes, sorted alphabetically

For example:

```xml
<Button
        android:id="@id/button_accept"
        style="@style/ButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentStart="true"
        android:padding="16dp"
        android:text="@string/button_skip_sign_in"
        android:textColor="@color/bluish_gray" />
```

**æ³¨æ„ï¼š** æ­¤æ ¼å¼å¯ä»¥é€šè¿‡åœ¨Android Studioä¸­æ ¼å¼åŠŸèƒ½è¿›è¡Œæ ¼å¼åŒ– - `cmd + shift + L`

å½“æƒ³æ›´æ”¹å¸ƒå±€æ–‡ä»¶å±æ€§æ—¶ï¼Œæ›´å®¹æ˜“é€šè¿‡XMLæµè§ˆæ‰¾åˆ°å±æ€§.

# 2.4 æµ‹è¯•æ ·å¼è§„åˆ™

## 2.4.1 å•å…ƒæµ‹è¯•

ä»»ä½•å•å…ƒæµ‹è¯•ç±»ååº”è¯¥å’Œæµ‹è¯•ç›®æ ‡ç±»ååŒ¹é…ï¼Œç»“å°¾åŠ ä¸ŠTeståç¼€ã€‚ç¤ºä¾‹ï¼š

Class                | Test Class
-------------------- | ------------------------
DataManager          | DataManagerTest
UserProfilePresenter | UserProfilePresenterTest
PreferencesHelper    | PreferencesHelperTest

æ‰€æœ‰çš„æµ‹è¯•æ–¹æ³•éƒ½åº”è¯¥ä½¿ç”¨`@Test`æ³¨é‡Šï¼Œæ–¹æ³•å‘½ååº”è¯¥éµå¾ªè¿™ä¸ªç¤ºä¾‹ï¼š

```java
@Test
public void methodNamePreconditionExpectedResult() { }
```

æ ¹æ®ç¤ºä¾‹ï¼Œæˆ‘ä»¬æƒ³æ£€æŸ¥signUp()æ–¹æ³•åœ¨æ— æ•ˆçš„emailåœ°å€æ—¶çš„æ•ˆæœï¼Œè¿™ä¸ªæµ‹è¯•æ–¹æ³•åº”è¯¥æ˜¯ï¼š

```java
@Test
    public void signUpWithInvalidEmailFails() { }
```

æµ‹è¯•åº”è¯¥åªæµ‹è¯•æ–¹æ³•åèµ‹äºˆçš„æµ‹è¯•ï¼Œå¦‚æœæƒ³æ·»åŠ é¢å¤–çš„æµ‹è¯•ï¼Œåº”è¯¥åˆ›å»ºæ–°çš„å•å…ƒæµ‹è¯•ã€‚

å¦‚æœæˆ‘ä»¬å½“å‰æµ‹è¯•ç±»åŒ…å«è®¸å¤šä¸åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæµ‹è¯•ç±»åº”è¯¥åˆ†å‰²æˆå¤šä¸ªæµ‹è¯•ç±»ã€‚è¿™æœ‰åŠ©äºä¿æŒæµ‹è¯•æ›´æ˜“äºç»´æŠ¤ï¼Œæ›´å®¹æ˜“å®šä½ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªDatabaseHelperç±»åº”è¯¥åˆ†æˆå¤šä¸ªæµ‹è¯•ç±»ï¼š

```java
DatabaseHelperUserTest
DatabaseHelperPostsTest
DatabaseHelperDraftsTest
```

## 2.4.2 Espressoæµ‹è¯•

æ¯ä¸ªEspressoæµ‹è¯•ç±»ä¸€èˆ¬é’ˆå¯¹ä¸€ä¸ªActivityï¼Œæ‰€ä»¥å®ƒçš„åç§°åº”ä¸ç›®æ ‡Activityçš„ç›¸åŒï¼Œå†æ¥ç€æµ‹è¯•ã€‚ ä¾‹å¦‚ï¼š

Class           | Test Class
--------------- | -------------------
MainActivity    | MainActivityTest
ProfileActivity | ProfileActivityTest
DraftsActivity  | DraftsActivityTest

å½“ç”¨Espresso APIæ—¶ï¼Œä¸ºäº†å¢åŠ å¯è¯»æ€§é“¾å¼æ–¹æ³•æ¯ä¸ªæ–¹æ³•éƒ½åº”è¯¥å•ç‹¬ä¸€è¡Œã€‚ç¤ºä¾‹ï¼š

```java
onView(withId(R.id.text_title))
        .perform(scrollTo())
        .check(matches(isDisplayed()))
```

è¿™ç§é£æ ¼ä¸ä»…å¸®åŠ©æˆ‘ä»¬åšæŒæ¯è¡Œå°‘äº100ä¸ªå­—ç¬¦ï¼Œè€Œä¸”ä¹Ÿå¾ˆå®¹æ˜“åœ°è¯»å–äº‹ä»¶å‘ç”Ÿåœ¨é‚£ä¸ªEspressoæµ‹è¯•é“¾ä¸Šã€‚
